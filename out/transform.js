// transform.js
//
// Copyright Charles Dick 2020
function transformIdentityCreate() {
    return [
        1.0, 0.0, 0.0,
        0.0, 1.0, 0.0,
    ];
}
function transformTranslateCreate(x, y) {
    return [
        1.0, 0.0, x,
        0.0, 1.0, y,
    ];
}
function transformScaleCreate(s) {
    return [
        s, 0.0, 0.0,
        0.0, s, 0.0,
    ];
}
function transformStretchCreate(sx, sy) {
    return [
        sx, 0.0, 0.0,
        0.0, sy, 0.0,
    ];
}
function transformRotateCreate(angle) {
    const c = Math.cos(angle);
    const s = Math.sin(angle);
    return [
        c, -s, 0.0,
        s, c, 0.0,
    ];
}
// combine two transforms, so t1 is applied, then t2
function transformCompose(t1, t2) {
    return [
        t2[0] * t1[0] + t2[1] * t1[3], t2[0] * t1[1] + t2[1] * t1[4], t2[0] * t1[2] + t2[1] * t1[5] + t2[2],
        t2[3] * t1[0] + t2[4] * t1[3], t2[3] * t1[1] + t2[4] * t1[4], t2[3] * t1[2] + t2[4] * t1[5] + t2[5],
    ];
}
function transformTranslate(t, x, y) {
    return [
        t[0], t[1], t[2] + x,
        t[3], t[4], t[5] + y,
    ];
}
function transformScale(t, s) {
    return [
        s * t[0], s * t[1], t[2],
        s * t[3], s * t[4], t[5],
    ];
}
function transformRotate(t, angle) {
    const c = Math.cos(angle);
    const s = Math.sin(angle);
    return [
        c * t[0] - s * t[3], c * t[1] - s * t[4], c * t[2] - s * t[5],
        s * t[0] + c * t[3], s * t[1] + c * t[4], s * t[2] + c * t[5],
    ];
}
function transformStretch(t, sx, sy) {
    return [
        sx * t[0], sx * t[1], sx * t[2],
        sy * t[3], sy * t[4], sy * t[5],
    ];
}
function transformInvert(t) {
    const det = t[0] * t[4] - t[3] * t[1];
    const dx = t[1] * t[5] - t[4] * t[2];
    const dy = t[3] * t[2] - t[0] * t[5];
    return [
        t[4] / det, -t[1] / det, dx / det,
        -t[3] / det, t[0] / det, dy / det,
    ];
}
function transformPoint(t, p) {
    return [
        p[0] * t[0] + p[1] * t[1] + t[2],
        p[0] * t[3] + p[1] * t[4] + t[5],
    ];
}
function transformMutatePoint(t, p) {
    const x = p[0] * t[0] + p[1] * t[1] + t[2];
    const y = p[0] * t[3] + p[1] * t[4] + t[5];
    p[0] = x;
    p[1] = y;
}
function transformNormal(t, n) {
    return [
        n[0] * t[0] + n[1] * t[1],
        n[0] * t[3] + n[1] * t[4],
    ];
}
function transformMutateNormal(t, n) {
    const x = n[0] * t[0] + n[1] * t[1];
    const y = n[0] * t[3] + n[1] * t[4];
    n[0] = x;
    n[1] = y;
}
export { transformCompose, transformIdentityCreate, transformInvert, transformMutateNormal, transformMutatePoint, transformNormal, transformPoint, transformScale, transformScaleCreate, transformStretch, transformStretchCreate, transformTranslate, transformTranslateCreate, transformRotate, transformRotateCreate, };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidHJhbnNmb3JtLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vc3JjL3RyYW5zZm9ybS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxlQUFlO0FBQ2YsRUFBRTtBQUNGLDhCQUE4QjtBQVM5QixTQUFTLHVCQUF1QjtJQUM5QixPQUFPO1FBQ0wsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHO1FBQ2IsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHO0tBQ2QsQ0FBQztBQUNKLENBQUM7QUFFRCxTQUFTLHdCQUF3QixDQUFDLENBQVMsRUFBRSxDQUFTO0lBQ3BELE9BQU87UUFDTCxHQUFHLEVBQUUsR0FBRyxFQUFFLENBQUM7UUFDWCxHQUFHLEVBQUUsR0FBRyxFQUFFLENBQUM7S0FDWixDQUFDO0FBQ0osQ0FBQztBQUVELFNBQVMsb0JBQW9CLENBQUMsQ0FBUztJQUNyQyxPQUFPO1FBQ0wsQ0FBQyxFQUFFLEdBQUcsRUFBRSxHQUFHO1FBQ1gsR0FBRyxFQUFFLENBQUMsRUFBRSxHQUFHO0tBQ1osQ0FBQztBQUNKLENBQUM7QUFFRCxTQUFTLHNCQUFzQixDQUFDLEVBQVUsRUFBRSxFQUFVO0lBQ3BELE9BQU87UUFDTCxFQUFFLEVBQUUsR0FBRyxFQUFFLEdBQUc7UUFDWixHQUFHLEVBQUUsRUFBRSxFQUFFLEdBQUc7S0FDYixDQUFDO0FBQ0osQ0FBQztBQUVELFNBQVMscUJBQXFCLENBQUMsS0FBYTtJQUMxQyxNQUFNLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQzFCLE1BQU0sQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLENBQUM7SUFDMUIsT0FBTztRQUNMLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxHQUFHO1FBQ1YsQ0FBQyxFQUFHLENBQUMsRUFBRSxHQUFHO0tBQ1gsQ0FBQztBQUNKLENBQUM7QUFFRCxvREFBb0Q7QUFDcEQsU0FBUyxnQkFBZ0IsQ0FBQyxFQUFZLEVBQUUsRUFBWTtJQUNsRCxPQUFPO1FBQ0wsRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQztRQUNuRyxFQUFFLENBQUMsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDO0tBQ3BHLENBQUM7QUFDSixDQUFDO0FBRUQsU0FBUyxrQkFBa0IsQ0FBQyxDQUFXLEVBQUUsQ0FBUyxFQUFFLENBQVM7SUFDM0QsT0FBTztRQUNMLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUM7UUFDcEIsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMs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LENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztLQUMxQixDQUFDO0FBQ0osQ0FBQztBQUVELFNBQVMscUJBQXFCLENBQUMsQ0FBVyxFQUFFLENBQVU7SUFDcEQsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQ3BDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUNwQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0lBQ1QsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQztBQUNYLENBQUM7QUFFRCxPQUFPLEVBQ0wsZ0JBQWdCLEVBQ2hCLHVCQUF1QixFQUN2QixlQUFlLEVBQ2YscUJBQXFCLEVBQ3JCLG9CQUFvQixFQUNwQixlQUFlLEVBQ2YsY0FBYyxFQUNkLGNBQWMsRUFDZCxvQkFBb0IsRUFDcEIsZ0JBQWdCLEVBQ2hCLHNCQUFzQixFQUN0QixrQkFBa0IsRUFDbEIsd0JBQXdCLEVBQ3hCLGVBQWUsRUFDZixxQkFBcUIsR0FDdEIsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8vIHRyYW5zZm9ybS5qc1xuLy9cbi8vIENvcHlyaWdodCBDaGFybGVzIERpY2sgMjAyMFxuXG5pbXBvcnQge1BvaW50MkR9IGZyb20gXCJwb2ludC5qc1wiXG5cbi8vIFRPRE86IHVuaXQgdGVzdHMsIGl0IHdpbGwgc3VjayBpZiB0aGVyZSBpcyBhIHR5cG8gaW4gaGVyZSwgc28gZmluZCBpdCBmaXJzdCFcbi8vIFRPRE86IGFwcGx5IFJlYWRvbmx5PD4gdG8gZXZlcnl0aGluZyB0aGF0IGNhbi5cblxuZXhwb3J0IHR5cGUgQWZmaW5lMkQgPSBbbnVtYmVyLCBudW1iZXIsIG51bWJlciwgbnVtYmVyLCBudW1iZXIsIG51bWJlcl07XG5cbmZ1bmN0aW9uIHRyYW5zZm9ybUlkZW50aXR5Q3JlYXRlKCk6IEFmZmluZTJEIHtcbiAgcmV0dXJuIFtcbiAgICAxLjAsIDAuMCwgMC4wLFxuICAgIDAuMCwgMS4wLCAwLjAsXG4gIF07XG59XG5cbmZ1bmN0aW9uIHRyYW5zZm9ybVRyYW5zbGF0ZUNyZWF0ZSh4OiBudW1iZXIsIHk6IG51bWJlcik6IEFmZmluZTJEIHtcbiAgcmV0dXJuIFtcbiAgICAxLjAsIDAuMCwgeCxcbiAgICAwLjAsIDEuMCwgeSxcbiAgXTtcbn1cblxuZnVuY3Rpb24gdHJhbnNmb3JtU2NhbGVDcmVhdGUoczogbnVtYmVyKTogQWZmaW5lMkQge1xuICByZXR1cm4gW1xuICAgIHMsIDAuMCwgMC4wLFxuICAgIDAuMCwgcywgMC4wLFxuICBdO1xufVxuXG5mdW5jdGlvbiB0cmFuc2Zvcm1TdHJldGNoQ3JlYXRlKHN4OiBudW1iZXIsIHN5OiBudW1iZXIpOiBBZmZpbmUyRCB7XG4gIHJldHVybiBbXG4gICAgc3gsIDAuMCwgMC4wLFxuICAgIDAuMCwgc3ksIDAuMCxcbiAgXTtcbn1cblxuZnVuY3Rpb24gdHJhbnNmb3JtUm90YXRlQ3JlYXRlKGFuZ2xlOiBudW1iZXIpOiBBZmZpbmUyRCB7XG4gIGNvbnN0IGMgPSBNYXRoLmNvcyhhbmdsZSk7XG4gIGNvbnN0IHMgPSBNYXRoLnNpbihhbmdsZSk7XG4gIHJldHVybiBbXG4gICAgYywgLXMsIDAuMCxcbiAgICBzLCAgYywgMC4wLFxuICBdO1xufVxuXG4vLyBjb21iaW5lIHR3byB0cmFuc2Zvcm1zLCBzbyB0MSBpcyBhcHBsaWVkLCB0aGVuIHQyXG5mdW5jdGlvbiB0cmFuc2Zvcm1Db21wb3NlKHQxOiBBZmZpbmUyRCwgdDI6IEFmZmluZTJEKTogQWZmaW5lMkQge1xuICByZXR1cm4gW1xuICAgIHQyWzBdICogdDFbMF0gKyB0MlsxXSAqIHQxWzNdLCB0MlswXSAqIHQxWzFdICsgdDJbMV0gKiB0MVs0XSwgdDJbMF0gKiB0MVsyXSArIHQyWzFdICogdDFbNV0gKyB0MlsyXSxcbiAgICB0MlszXSAqIHQxWzBdICsgdDJbNF0gKiB0MVszXSwgdDJbM10gKiB0MVsxXSArIHQyWzRdICogdDFbNF0sIHQyWzNdICogdDFbMl0gKyB0Mls0XSAqIHQxWzVdICsgdDJbNV0sXG4gIF07XG59XG5cbmZ1bmN0aW9uIHRyYW5zZm9ybVRyYW5zbGF0ZSh0OiBBZmZpbmUyRCwgeDogbnVtYmVyLCB5OiBudW1iZXIpOiBBZmZpbmUyRCB7XG4gIHJldHVybiBbXG4gICAgdFswXSwgdFsxXSwgdFsyXSArIHgsXG4gICAgdFszXSwgdFs0XSwgdFs1XSArIHksXG4gIF07XG59XG5cbmZ1bmN0aW9uIHRyYW5zZm9ybVNjYWxlKHQ6IEFmZmluZTJELCBzOiBudW1iZXIpOiBBZmZpbmUyRCB7XG4gIHJldHVybiBbXG4gICAgcyAqIHRbMF0sIHMgKiB0WzFdLCB0WzJdLFxuICAgIHMgKiB0WzNdLCBzICogdFs0XSwgdFs1XSxcbiAgXTtcbn1cblxuZnVuY3Rpb24gdHJhbnNmb3JtUm90YXRlKHQ6IEFmZmluZTJELCBhbmdsZTogbnVtYmVyKTogQWZmaW5lMkQge1xuICBjb25zdCBjID0gTWF0aC5jb3MoYW5nbGUpO1xuICBjb25zdCBzID0gTWF0aC5zaW4oYW5nbGUpO1xuICByZXR1cm4gW1xuICAgIGMgKiB0WzBdIC0gcyAqIHRbM10sIGMgKiB0WzFdIC0gcyAqIHRbNF0sIGMgKiB0WzJdIC0gcyAqIHRbNV0sXG4gICAgcyAqIHRbMF0gKyBjICogdFszXSwgcyAqIHRbMV0gKyBjICogdFs0XSwgcyAqIHRbMl0gKyBjICogdFs1XSxcbiAgXTtcbn1cblxuZnVuY3Rpb24gdHJhbnNmb3JtU3RyZXRjaCh0OiBBZmZpbmUyRCwgc3g6IG51bWJlciwgc3k6IG51bWJlcik6IEFmZmluZTJEIHtcbiAgcmV0dXJuIFtcbiAgICBzeCAqIHRbMF0sIHN4ICogdFsxXSwgc3ggKiB0WzJdLFxuICAgIHN5ICogdFszXSwgc3kgKiB0WzRdLCBzeSAqIHRbNV0sXG4gIF07XG59XG5cbmZ1bmN0aW9uIHRyYW5zZm9ybUludmVydCh0OiBBZmZpbmUyRCk6IEFmZmluZTJEIHtcbiAgY29uc3QgZGV0ID0gdFswXSAqIHRbNF0gLSB0WzNdICogdFsxXTtcbiAgY29uc3QgZHggPSB0WzFdICogdFs1XSAtIHRbNF0gKiB0WzJdO1xuICBjb25zdCBkeSA9IHRbM10gKiB0WzJdIC0gdFswXSAqIHRbNV07XG4gIHJldHVybiBbXG4gICAgIHRbNF0gLyBkZXQsIC10WzFdIC8gZGV0LCBkeCAvIGRldCxcbiAgICAtdFszXSAvIGRldCwgIHRbMF0gLyBkZXQsIGR5IC8gZGV0LFxuICBdO1xufVxuXG5mdW5jdGlvbiB0cmFuc2Zvcm1Qb2ludCh0OiBSZWFkb25seTxBZmZpbmUyRD4sIHA6IFBvaW50MkQpOiBQb2ludDJEIHtcbiAgcmV0dXJuIFtcbiAgICBwWzBdICogdFswXSArIHBbMV0gKiB0WzFdICsgdFsyXSxcbiAgICBwWzBdICogdFszXSArIHBbMV0gKiB0WzRdICsgdFs1XSxcbiAgXTtcbn1cblxuZnVuY3Rpb24gdHJhbnNmb3JtTXV0YXRlUG9pbnQodDogQWZmaW5lMkQsIHA6IFBvaW50MkQpIHtcbiAgY29uc3QgeCA9IHBbMF0gKiB0WzBdICsgcFsxXSAqIHRbMV0gKyB0WzJdO1xuICBjb25zdCB5ID0gcFswXSAqIHRbM10gKyBwWzFdICogdFs0XSArIHRbNV07XG4gIHBbMF0gPSB4O1xuICBwWzFdID0geTtcbn1cblxuZnVuY3Rpb24gdHJhbnNmb3JtTm9ybWFsKHQ6IEFmZmluZTJELCBuOiBQb2ludDJEKTogUG9pbnQyRCB7XG4gIHJldHVybiBbXG4gICAgblswXSAqIHRbMF0gKyBuWzFdICogdFsxXSxcbiAgICBuWzBdICogdFszXSArIG5bMV0gKiB0WzRdLFxuICBdO1xufVxuXG5mdW5jdGlvbiB0cmFuc2Zvcm1NdXRhdGVOb3JtYWwodDogQWZmaW5lMkQsIG46IFBvaW50MkQpIHtcbiAgY29uc3QgeCA9IG5bMF0gKiB0WzBdICsgblsxXSAqIHRbMV07XG4gIGNvbnN0IHkgPSBuWzBdICogdFszXSArIG5bMV0gKiB0WzRdO1xuICBuWzBdID0geDtcbiAgblsxXSA9IHk7XG59XG5cbmV4cG9ydCB7XG4gIHRyYW5zZm9ybUNvbXBvc2UsXG4gIHRyYW5zZm9ybUlkZW50aXR5Q3JlYXRlLFxuICB0cmFuc2Zvcm1JbnZlcnQsXG4gIHRyYW5zZm9ybU11dGF0ZU5vcm1hbCxcbiAgdHJhbnNmb3JtTXV0YXRlUG9pbnQsXG4gIHRyYW5zZm9ybU5vcm1hbCxcbiAgdHJhbnNmb3JtUG9pbnQsXG4gIHRyYW5zZm9ybVNjYWxlLFxuICB0cmFuc2Zvcm1TY2FsZUNyZWF0ZSxcbiAgdHJhbnNmb3JtU3RyZXRjaCxcbiAgdHJhbnNmb3JtU3RyZXRjaENyZWF0ZSxcbiAgdHJhbnNmb3JtVHJhbnNsYXRlLFxuICB0cmFuc2Zvcm1UcmFuc2xhdGVDcmVhdGUsXG4gIHRyYW5zZm9ybVJvdGF0ZSxcbiAgdHJhbnNmb3JtUm90YXRlQ3JlYXRlLFxufTtcbiJdfQ==