// transform.js
//
// Copyright Charles Dick 2020
function transformIdentityCreate() {
    return [
        1.0, 0.0, 0.0,
        0.0, 1.0, 0.0,
    ];
}
function transformTranslateCreate(x, y) {
    return [
        1.0, 0.0, x,
        0.0, 1.0, y,
    ];
}
function transformScaleCreate(s) {
    return [
        s, 0.0, 0.0,
        0.0, s, 0.0,
    ];
}
function transformStretchCreate(sx, sy) {
    return [
        sx, 0.0, 0.0,
        0.0, sy, 0.0,
    ];
}
function transformRotateCreate(angle) {
    const c = Math.cos(angle);
    const s = Math.sin(angle);
    return [
        c, -s, 0.0,
        s, c, 0.0,
    ];
}
// combine two transforms, so t1 is applied, then t2
function transformCompose(t1, t2) {
    return [
        t2[0] * t1[0] + t2[1] * t1[3], t2[0] * t1[1] + t2[1] * t1[4], t2[0] * t1[2] + t2[1] * t1[5] + t2[2],
        t2[3] * t1[0] + t2[4] * t1[3], t2[3] * t1[1] + t2[4] * t1[4], t2[3] * t1[2] + t2[4] * t1[5] + t2[5],
    ];
}
function transformTranslate(t, x, y) {
    return [
        t[0], t[1], t[2] + x,
        t[3], t[4], t[5] + y,
    ];
}
function transformScale(t, s) {
    return [
        s * t[0], s * t[1], t[2],
        s * t[3], s * t[4], t[5],
    ];
}
function transformRotate(t, angle) {
    const c = Math.cos(angle);
    const s = Math.sin(angle);
    return [
        c * t[0] - s * t[3], c * t[1] - s * t[4], c * t[2] - s * t[5],
        s * t[0] + c * t[3], s * t[1] + c * t[4], s * t[2] + c * t[5],
    ];
}
function transformStretch(t, sx, sy) {
    return [
        sx * t[0], sx * t[1], sx * t[2],
        sy * t[3], sy * t[4], sy * t[5],
    ];
}
function transformInvert(t) {
    const det = t[0] * t[4] - t[3] * t[1];
    const dx = t[1] * t[5] - t[4] * t[2];
    const dy = t[3] * t[2] - t[0] * t[5];
    return [
        t[4] / det, -t[1] / det, dx / det,
        -t[3] / det, t[0] / det, dy / det,
    ];
}
function transformPoint(t, p) {
    return [
        p[0] * t[0] + p[1] * t[1] + t[2],
        p[0] * t[3] + p[1] * t[4] + t[5],
    ];
}
function transformMutatePoint(t, p) {
    const x = p[0] * t[0] + p[1] * t[1] + t[2];
    const y = p[0] * t[3] + p[1] * t[4] + t[5];
    p[0] = x;
    p[1] = y;
}
function transformNormal(t, n) {
    return [
        n[0] * t[0] + n[1] * t[1],
        n[0] * t[3] + n[1] * t[4],
    ];
}
function transformMutateNormal(t, n) {
    const x = n[0] * t[0] + n[1] * t[1];
    const y = n[0] * t[3] + n[1] * t[4];
    n[0] = x;
    n[1] = y;
}
export { transformCompose, transformIdentityCreate, transformInvert, transformMutateNormal, transformMutatePoint, transformNormal, transformPoint, transformScale, transformScaleCreate, transformStretch, transformStretchCreate, transformTranslate, transformTranslateCreate, transformRotate, transformRotateCreate, };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidHJhbnNmb3JtLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vc3JjL3RyYW5zZm9ybS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxlQUFlO0FBQ2YsRUFBRTtBQUNGLDhCQUE4QjtBQVE5QixTQUFTLHVCQUF1QjtJQUM5QixPQUFPO1FBQ0wsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHO1FBQ2IsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHO0tBQ2QsQ0FBQztBQUNKLENBQUM7QUFFRCxTQUFTLHdCQUF3QixDQUFDLENBQVMsRUFBRSxDQUFTO0lBQ3BELE9BQU87UUFDTCxHQUFHLEVBQUUsR0FBRyxFQUFFLENBQUM7UUFDWCxHQUFHLEVBQUUsR0FBRyxFQUFFLENBQUM7S0FDWixDQUFDO0FBQ0osQ0FBQztBQUVELFNBQVMsb0JBQW9CLENBQUMsQ0FBUztJQUNyQyxPQUFPO1FBQ0wsQ0FBQyxFQUFFLEdBQUcsRUFBRSxHQUFHO1FBQ1gsR0FBRyxFQUFFLENBQUMsRUFBRSxHQUFHO0tBQ1osQ0FBQztBQUNKLENBQUM7QUFFRCxTQUFTLHNCQUFzQixDQUFDLEVBQVUsRUFBRSxFQUFVO0lBQ3BELE9BQU87UUFDTCxFQUFFLEVBQUUsR0FBRyxFQUFFLEdBQUc7UUFDWixHQUFHLEVBQUUsRUFBRSxFQUFFLEdBQUc7S0FDYixDQUFDO0FBQ0osQ0FBQztBQUVELFNBQVMscUJBQXFCLENBQUMsS0FBYTtJQUMxQyxNQUFNLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQzFCLE1BQU0sQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLENBQUM7SUFDMUIsT0FBTztRQUNMLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxHQUFHO1FBQ1YsQ0FBQyxFQUFHLENBQUMsRUFBRSxHQUFHO0tBQ1gsQ0FBQztBQUNKLENBQUM7QUFFRCxvREFBb0Q7QUFDcEQsU0FBUyxnQkFBZ0IsQ0FBQyxFQUFZLEVBQUUsRUFBWTtJQUNsRCxPQUFPO1FBQ0wsRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQztRQUNuRyxFQUFFLENBQUMsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDO0tBQ3BHLENBQUM7QUFDSixDQUFDO0FBRUQsU0FBUyxrQkFBa0IsQ0FBQyxDQUFXLEVBQUUsQ0FBUyxFQUFFLENBQVM7SUFDM0QsT0FBTztRQUNMLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUM7UUFDcEIsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMs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Q0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO0tBQzFCLENBQUM7QUFDSixDQUFDO0FBRUQsU0FBUyxxQkFBcUIsQ0FBQyxDQUFXLEVBQUUsQ0FBVTtJQUNwRCxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDcEMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQ3BDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7SUFDVCxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0FBQ1gsQ0FBQztBQUVELE9BQU8sRUFDTCxnQkFBZ0IsRUFDaEIsdUJBQXVCLEVBQ3ZCLGVBQWUsRUFDZixxQkFBcUIsRUFDckIsb0JBQW9CLEVBQ3BCLGVBQWUsRUFDZixjQUFjLEVBQ2QsY0FBYyxFQUNkLG9CQUFvQixFQUNwQixnQkFBZ0IsRUFDaEIsc0JBQXNCLEVBQ3RCLGtCQUFrQixFQUNsQix3QkFBd0IsRUFDeEIsZUFBZSxFQUNmLHFCQUFxQixHQUN0QixDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLy8gdHJhbnNmb3JtLmpzXG4vL1xuLy8gQ29weXJpZ2h0IENoYXJsZXMgRGljayAyMDIwXG5cbi8vIFRPRE86IHVuaXQgdGVzdHMsIGl0IHdpbGwgc3VjayBpZiB0aGVyZSBpcyBhIHR5cG8gaW4gaGVyZSwgc28gZmluZCBpdCBmaXJzdCFcblxuZXhwb3J0IHR5cGUgQWZmaW5lMkQgPSBbbnVtYmVyLCBudW1iZXIsIG51bWJlciwgbnVtYmVyLCBudW1iZXIsIG51bWJlcl07XG5cbmV4cG9ydCB0eXBlIFBvaW50MkQgPSBbbnVtYmVyLCBudW1iZXJdO1xuXG5mdW5jdGlvbiB0cmFuc2Zvcm1JZGVudGl0eUNyZWF0ZSgpOiBBZmZpbmUyRCB7XG4gIHJldHVybiBbXG4gICAgMS4wLCAwLjAsIDAuMCxcbiAgICAwLjAsIDEuMCwgMC4wLFxuICBdO1xufVxuXG5mdW5jdGlvbiB0cmFuc2Zvcm1UcmFuc2xhdGVDcmVhdGUoeDogbnVtYmVyLCB5OiBudW1iZXIpOiBBZmZpbmUyRCB7XG4gIHJldHVybiBbXG4gICAgMS4wLCAwLjAsIHgsXG4gICAgMC4wLCAxLjAsIHksXG4gIF07XG59XG5cbmZ1bmN0aW9uIHRyYW5zZm9ybVNjYWxlQ3JlYXRlKHM6IG51bWJlcik6IEFmZmluZTJEIHtcbiAgcmV0dXJuIFtcbiAgICBzLCAwLjAsIDAuMCxcbiAgICAwLjAsIHMsIDAuMCxcbiAgXTtcbn1cblxuZnVuY3Rpb24gdHJhbnNmb3JtU3RyZXRjaENyZWF0ZShzeDogbnVtYmVyLCBzeTogbnVtYmVyKTogQWZmaW5lMkQge1xuICByZXR1cm4gW1xuICAgIHN4LCAwLjAsIDAuMCxcbiAgICAwLjAsIHN5LCAwLjAsXG4gIF07XG59XG5cbmZ1bmN0aW9uIHRyYW5zZm9ybVJvdGF0ZUNyZWF0ZShhbmdsZTogbnVtYmVyKTogQWZmaW5lMkQge1xuICBjb25zdCBjID0gTWF0aC5jb3MoYW5nbGUpO1xuICBjb25zdCBzID0gTWF0aC5zaW4oYW5nbGUpO1xuICByZXR1cm4gW1xuICAgIGMsIC1zLCAwLjAsXG4gICAgcywgIGMsIDAuMCxcbiAgXTtcbn1cblxuLy8gY29tYmluZSB0d28gdHJhbnNmb3Jtcywgc28gdDEgaXMgYXBwbGllZCwgdGhlbiB0MlxuZnVuY3Rpb24gdHJhbnNmb3JtQ29tcG9zZSh0MTogQWZmaW5lMkQsIHQyOiBBZmZpbmUyRCk6IEFmZmluZTJEIHtcbiAgcmV0dXJuIFtcbiAgICB0MlswXSAqIHQxWzBdICsgdDJbMV0gKiB0MVszXSwgdDJbMF0gKiB0MVsxXSArIHQyWzFdICogdDFbNF0sIHQyWzBdICogdDFbMl0gKyB0MlsxXSAqIHQxWzVdICsgdDJbMl0sXG4gICAgdDJbM10gKiB0MVswXSArIHQyWzRdICogdDFbM10sIHQyWzNdICogdDFbMV0gKyB0Mls0XSAqIHQxWzRdLCB0MlszXSAqIHQxWzJdICsgdDJbNF0gKiB0MVs1XSArIHQyWzVdLFxuICBdO1xufVxuXG5mdW5jdGlvbiB0cmFuc2Zvcm1UcmFuc2xhdGUodDogQWZmaW5lMkQsIHg6IG51bWJlciwgeTogbnVtYmVyKTogQWZmaW5lMkQge1xuICByZXR1cm4gW1xuICAgIHRbMF0sIHRbMV0sIHRbMl0gKyB4LFxuICAgIHRbM10sIHRbNF0sIHRbNV0gKyB5LFxuICBdO1xufVxuXG5mdW5jdGlvbiB0cmFuc2Zvcm1TY2FsZSh0OiBBZmZpbmUyRCwgczogbnVtYmVyKTogQWZmaW5lMkQge1xuICByZXR1cm4gW1xuICAgIHMgKiB0WzBdLCBzICogdFsxXSwgdFsyXSxcbiAgICBzICogdFszXSwgcyAqIHRbNF0sIHRbNV0sXG4gIF07XG59XG5cbmZ1bmN0aW9uIHRyYW5zZm9ybVJvdGF0ZSh0OiBBZmZpbmUyRCwgYW5nbGU6IG51bWJlcik6IEFmZmluZTJEIHtcbiAgY29uc3QgYyA9IE1hdGguY29zKGFuZ2xlKTtcbiAgY29uc3QgcyA9IE1hdGguc2luKGFuZ2xlKTtcbiAgcmV0dXJuIFtcbiAgICBjICogdFswXSAtIHMgKiB0WzNdLCBjICogdFsxXSAtIHMgKiB0WzRdLCBjICogdFsyXSAtIHMgKiB0WzVdLFxuICAgIHMgKiB0WzBdICsgYyAqIHRbM10sIHMgKiB0WzFdICsgYyAqIHRbNF0sIHMgKiB0WzJdICsgYyAqIHRbNV0sXG4gIF07XG59XG5cbmZ1bmN0aW9uIHRyYW5zZm9ybVN0cmV0Y2godDogQWZmaW5lMkQsIHN4OiBudW1iZXIsIHN5OiBudW1iZXIpOiBBZmZpbmUyRCB7XG4gIHJldHVybiBbXG4gICAgc3ggKiB0WzBdLCBzeCAqIHRbMV0sIHN4ICogdFsyXSxcbiAgICBzeSAqIHRbM10sIHN5ICogdFs0XSwgc3kgKiB0WzVdLFxuICBdO1xufVxuXG5mdW5jdGlvbiB0cmFuc2Zvcm1JbnZlcnQodDogQWZmaW5lMkQpOiBBZmZpbmUyRCB7XG4gIGNvbnN0IGRldCA9IHRbMF0gKiB0WzRdIC0gdFszXSAqIHRbMV07XG4gIGNvbnN0IGR4ID0gdFsxXSAqIHRbNV0gLSB0WzRdICogdFsyXTtcbiAgY29uc3QgZHkgPSB0WzNdICogdFsyXSAtIHRbMF0gKiB0WzVdO1xuICByZXR1cm4gW1xuICAgICB0WzRdIC8gZGV0LCAtdFsxXSAvIGRldCwgZHggLyBkZXQsXG4gICAgLXRbM10gLyBkZXQsICB0WzBdIC8gZGV0LCBkeSAvIGRldCxcbiAgXTtcbn1cblxuZnVuY3Rpb24gdHJhbnNmb3JtUG9pbnQodDogQWZmaW5lMkQsIHA6IFBvaW50MkQpOiBQb2ludDJEIHtcbiAgcmV0dXJuIFtcbiAgICBwWzBdICogdFswXSArIHBbMV0gKiB0WzFdICsgdFsyXSxcbiAgICBwWzBdICogdFszXSArIHBbMV0gKiB0WzRdICsgdFs1XSxcbiAgXTtcbn1cblxuZnVuY3Rpb24gdHJhbnNmb3JtTXV0YXRlUG9pbnQodDogQWZmaW5lMkQsIHA6IFBvaW50MkQpIHtcbiAgY29uc3QgeCA9IHBbMF0gKiB0WzBdICsgcFsxXSAqIHRbMV0gKyB0WzJdO1xuICBjb25zdCB5ID0gcFswXSAqIHRbM10gKyBwWzFdICogdFs0XSArIHRbNV07XG4gIHBbMF0gPSB4O1xuICBwWzFdID0geTtcbn1cblxuZnVuY3Rpb24gdHJhbnNmb3JtTm9ybWFsKHQ6IEFmZmluZTJELCBuOiBQb2ludDJEKTogUG9pbnQyRCB7XG4gIHJldHVybiBbXG4gICAgblswXSAqIHRbMF0gKyBuWzFdICogdFsxXSxcbiAgICBuWzBdICogdFszXSArIG5bMV0gKiB0WzRdLFxuICBdO1xufVxuXG5mdW5jdGlvbiB0cmFuc2Zvcm1NdXRhdGVOb3JtYWwodDogQWZmaW5lMkQsIG46IFBvaW50MkQpIHtcbiAgY29uc3QgeCA9IG5bMF0gKiB0WzBdICsgblsxXSAqIHRbMV07XG4gIGNvbnN0IHkgPSBuWzBdICogdFszXSArIG5bMV0gKiB0WzRdO1xuICBuWzBdID0geDtcbiAgblsxXSA9IHk7XG59XG5cbmV4cG9ydCB7XG4gIHRyYW5zZm9ybUNvbXBvc2UsXG4gIHRyYW5zZm9ybUlkZW50aXR5Q3JlYXRlLFxuICB0cmFuc2Zvcm1JbnZlcnQsXG4gIHRyYW5zZm9ybU11dGF0ZU5vcm1hbCxcbiAgdHJhbnNmb3JtTXV0YXRlUG9pbnQsXG4gIHRyYW5zZm9ybU5vcm1hbCxcbiAgdHJhbnNmb3JtUG9pbnQsXG4gIHRyYW5zZm9ybVNjYWxlLFxuICB0cmFuc2Zvcm1TY2FsZUNyZWF0ZSxcbiAgdHJhbnNmb3JtU3RyZXRjaCxcbiAgdHJhbnNmb3JtU3RyZXRjaENyZWF0ZSxcbiAgdHJhbnNmb3JtVHJhbnNsYXRlLFxuICB0cmFuc2Zvcm1UcmFuc2xhdGVDcmVhdGUsXG4gIHRyYW5zZm9ybVJvdGF0ZSxcbiAgdHJhbnNmb3JtUm90YXRlQ3JlYXRlLFxufTtcbiJdfQ==