// transform.js
//
// Copyright Charles Dick 2020
function transformIdentityCreate() {
    return [
        1.0, 0.0, 0.0,
        0.0, 1.0, 0.0,
    ];
}
function transformTranslateCreate(x, y) {
    return [
        1.0, 0.0, x,
        0.0, 1.0, y,
    ];
}
function transformScaleCreate(s) {
    return [
        s, 0.0, 0.0,
        0.0, s, 0.0,
    ];
}
function transformStretchCreate(sx, sy) {
    return [
        sx, 0.0, 0.0,
        0.0, sy, 0.0,
    ];
}
function transformRotateCreate(angle) {
    const c = Math.cos(angle);
    const s = Math.sin(angle);
    return [
        c, -s, 0.0,
        s, c, 0.0,
    ];
}
// combine two transforms, so t1 is applied, then t2
function transformCompose(t1, t2) {
    return [
        t2[0] * t1[0] + t2[1] * t1[3], t2[0] * t1[1] + t2[1] * t1[4], t2[0] * t1[2] + t2[1] * t1[5] + t2[2],
        t2[3] * t1[0] + t2[4] * t1[3], t2[3] * t1[1] + t2[4] * t1[4], t2[3] * t1[2] + t2[4] * t1[5] + t2[5],
    ];
}
function transformTranslate(t, x, y) {
    return [
        t[0], t[1], t[2] + x,
        t[3], t[4], t[5] + y,
    ];
}
function transformScale(t, s) {
    return [
        s * t[0], s * t[1], t[2],
        s * t[3], s * t[4], t[5],
    ];
}
function transformRotate(t, angle) {
    const c = Math.cos(angle);
    const s = Math.sin(angle);
    return [
        c * t[0] - s * t[3], c * t[1] - s * t[4], c * t[2] - s * t[5],
        s * t[0] + c * t[3], s * t[1] + c * t[4], s * t[2] + c * t[5],
    ];
}
function transformStretch(t, sx, sy) {
    return [
        sx * t[0], sx * t[1], sx * t[2],
        sy * t[3], sy * t[4], sy * t[5],
    ];
}
function transformInvert(t) {
    const det = t[0] * t[4] - t[3] * t[1];
    const dx = t[1] * t[5] - t[4] * t[2];
    const dy = t[3] * t[2] - t[0] * t[5];
    return [
        t[4] / det, -t[1] / det, dx / det,
        -t[3] / det, t[0] / det, dy / det,
    ];
}
function transformPoint(t, p) {
    return [
        p[0] * t[0] + p[1] * t[1] + t[2],
        p[0] * t[3] + p[1] * t[4] + t[5],
    ];
}
function transformMutatePoint(t, p) {
    const x = p[0] * t[0] + p[1] * t[1] + t[2];
    const y = p[0] * t[3] + p[1] * t[4] + t[5];
    p[0] = x;
    p[1] = y;
}
function transformNormal(t, n) {
    return [
        n[0] * t[0] + n[1] * t[1],
        n[0] * t[3] + n[1] * t[4],
    ];
}
function transformMutateNormal(t, n) {
    const x = n[0] * t[0] + n[1] * t[1];
    const y = n[0] * t[3] + n[1] * t[4];
    n[0] = x;
    n[1] = y;
}
export { transformCompose, transformIdentityCreate, transformInvert, transformMutateNormal, transformMutatePoint, transformNormal, transformPoint, transformScale, transformScaleCreate, transformStretch, transformStretchCreate, transformTranslate, transformTranslateCreate, transformRotate, transformRotateCreate, };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidHJhbnNmb3JtLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vc3JjL3RyYW5zZm9ybS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxlQUFlO0FBQ2YsRUFBRTtBQUNGLDhCQUE4QjtBQVE5QixTQUFTLHVCQUF1QjtJQUM5QixPQUFPO1FBQ0wsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHO1FBQ2IsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHO0tBQ2QsQ0FBQztBQUNKLENBQUM7QUFFRCxTQUFTLHdCQUF3QixDQUFDLENBQVMsRUFBRSxDQUFTO0lBQ3BELE9BQU87UUFDTCxHQUFHLEVBQUUsR0FBRyxFQUFFLENBQUM7UUFDWCxHQUFHLEVBQUUsR0FBRyxFQUFFLENBQUM7S0FDWixDQUFDO0FBQ0osQ0FBQztBQUVELFNBQVMsb0JBQW9CLENBQUMsQ0FBUztJQUNyQyxPQUFPO1FBQ0wsQ0FBQyxFQUFFLEdBQUcsRUFBRSxHQUFHO1FBQ1gsR0FBRyxFQUFFLENBQUMsRUFBRSxHQUFHO0tBQ1osQ0FBQztBQUNKLENBQUM7QUFFRCxTQUFTLHNCQUFzQixDQUFDLEVBQVUsRUFBRSxFQUFVO0lBQ3BELE9BQU87UUFDTCxFQUFFLEVBQUUsR0FBRyxFQUFFLEdBQUc7UUFDWixHQUFHLEVBQUUsRUFBRSxFQUFFLEdBQUc7S0FDYixDQUFDO0FBQ0osQ0FBQztBQUVELFNBQVMscUJBQXFCLENBQUMsS0FBYTtJQUMxQyxNQUFNLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQzFCLE1BQU0sQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLENBQUM7SUFDMUIsT0FBTztRQUNMLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxHQUFHO1FBQ1YsQ0FBQyxFQUFHLENBQUMsRUFBRSxHQUFHO0tBQ1gsQ0FBQztBQUNKLENBQUM7QUFFRCxvREFBb0Q7QUFDcEQsU0FBUyxnQkFBZ0IsQ0FBQyxFQUFZLEVBQUUsRUFBWTtJQUNsRCxPQUFPO1FBQ0wsRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQztRQUNuRyxFQUFFLENBQUMsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDO0tBQ3BHLENBQUM7QUFDSixDQUFDO0FBRUQsU0FBUyxrQkFBa0IsQ0FBQyxDQUFXLEVBQUUsQ0FBUyxFQUFFLENBQVM7SUFDM0QsT0FBTztRQUNMLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUM7UUFDcEIsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMs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Q0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO0tBQzFCLENBQUM7QUFDSixDQUFDO0FBRUQsU0FBUyxxQkFBcUIsQ0FBQyxDQUFXLEVBQUUsQ0FBVTtJQUNwRCxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDcEMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQ3BDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7SUFDVCxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0FBQ1gsQ0FBQztBQUVELE9BQU8sRUFDTCxnQkFBZ0IsRUFDaEIsdUJBQXVCLEVBQ3ZCLGVBQWUsRUFDZixxQkFBcUIsRUFDckIsb0JBQW9CLEVBQ3BCLGVBQWUsRUFDZixjQUFjLEVBQ2QsY0FBYyxFQUNkLG9CQUFvQixFQUNwQixnQkFBZ0IsRUFDaEIsc0JBQXNCLEVBQ3RCLGtCQUFrQixFQUNsQix3QkFBd0IsRUFDeEIsZUFBZSxFQUNmLHFCQUFxQixHQUN0QixDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLy8gdHJhbnNmb3JtLmpzXG4vL1xuLy8gQ29weXJpZ2h0IENoYXJsZXMgRGljayAyMDIwXG5cbmltcG9ydCB7UG9pbnQyRH0gZnJvbSBcInBvaW50LmpzXCJcblxuLy8gVE9ETzogdW5pdCB0ZXN0cywgaXQgd2lsbCBzdWNrIGlmIHRoZXJlIGlzIGEgdHlwbyBpbiBoZXJlLCBzbyBmaW5kIGl0IGZpcnN0IVxuXG5leHBvcnQgdHlwZSBBZmZpbmUyRCA9IFtudW1iZXIsIG51bWJlciwgbnVtYmVyLCBudW1iZXIsIG51bWJlciwgbnVtYmVyXTtcblxuZnVuY3Rpb24gdHJhbnNmb3JtSWRlbnRpdHlDcmVhdGUoKTogQWZmaW5lMkQge1xuICByZXR1cm4gW1xuICAgIDEuMCwgMC4wLCAwLjAsXG4gICAgMC4wLCAxLjAsIDAuMCxcbiAgXTtcbn1cblxuZnVuY3Rpb24gdHJhbnNmb3JtVHJhbnNsYXRlQ3JlYXRlKHg6IG51bWJlciwgeTogbnVtYmVyKTogQWZmaW5lMkQge1xuICByZXR1cm4gW1xuICAgIDEuMCwgMC4wLCB4LFxuICAgIDAuMCwgMS4wLCB5LFxuICBdO1xufVxuXG5mdW5jdGlvbiB0cmFuc2Zvcm1TY2FsZUNyZWF0ZShzOiBudW1iZXIpOiBBZmZpbmUyRCB7XG4gIHJldHVybiBbXG4gICAgcywgMC4wLCAwLjAsXG4gICAgMC4wLCBzLCAwLjAsXG4gIF07XG59XG5cbmZ1bmN0aW9uIHRyYW5zZm9ybVN0cmV0Y2hDcmVhdGUoc3g6IG51bWJlciwgc3k6IG51bWJlcik6IEFmZmluZTJEIHtcbiAgcmV0dXJuIFtcbiAgICBzeCwgMC4wLCAwLjAsXG4gICAgMC4wLCBzeSwgMC4wLFxuICBdO1xufVxuXG5mdW5jdGlvbiB0cmFuc2Zvcm1Sb3RhdGVDcmVhdGUoYW5nbGU6IG51bWJlcik6IEFmZmluZTJEIHtcbiAgY29uc3QgYyA9IE1hdGguY29zKGFuZ2xlKTtcbiAgY29uc3QgcyA9IE1hdGguc2luKGFuZ2xlKTtcbiAgcmV0dXJuIFtcbiAgICBjLCAtcywgMC4wLFxuICAgIHMsICBjLCAwLjAsXG4gIF07XG59XG5cbi8vIGNvbWJpbmUgdHdvIHRyYW5zZm9ybXMsIHNvIHQxIGlzIGFwcGxpZWQsIHRoZW4gdDJcbmZ1bmN0aW9uIHRyYW5zZm9ybUNvbXBvc2UodDE6IEFmZmluZTJELCB0MjogQWZmaW5lMkQpOiBBZmZpbmUyRCB7XG4gIHJldHVybiBbXG4gICAgdDJbMF0gKiB0MVswXSArIHQyWzFdICogdDFbM10sIHQyWzBdICogdDFbMV0gKyB0MlsxXSAqIHQxWzRdLCB0MlswXSAqIHQxWzJdICsgdDJbMV0gKiB0MVs1XSArIHQyWzJdLFxuICAgIHQyWzNdICogdDFbMF0gKyB0Mls0XSAqIHQxWzNdLCB0MlszXSAqIHQxWzFdICsgdDJbNF0gKiB0MVs0XSwgdDJbM10gKiB0MVsyXSArIHQyWzRdICogdDFbNV0gKyB0Mls1XSxcbiAgXTtcbn1cblxuZnVuY3Rpb24gdHJhbnNmb3JtVHJhbnNsYXRlKHQ6IEFmZmluZTJELCB4OiBudW1iZXIsIHk6IG51bWJlcik6IEFmZmluZTJEIHtcbiAgcmV0dXJuIFtcbiAgICB0WzBdLCB0WzFdLCB0WzJdICsgeCxcbiAgICB0WzNdLCB0WzRdLCB0WzVdICsgeSxcbiAgXTtcbn1cblxuZnVuY3Rpb24gdHJhbnNmb3JtU2NhbGUodDogQWZmaW5lMkQsIHM6IG51bWJlcik6IEFmZmluZTJEIHtcbiAgcmV0dXJuIFtcbiAgICBzICogdFswXSwgcyAqIHRbMV0sIHRbMl0sXG4gICAgcyAqIHRbM10sIHMgKiB0WzRdLCB0WzVdLFxuICBdO1xufVxuXG5mdW5jdGlvbiB0cmFuc2Zvcm1Sb3RhdGUodDogQWZmaW5lMkQsIGFuZ2xlOiBudW1iZXIpOiBBZmZpbmUyRCB7XG4gIGNvbnN0IGMgPSBNYXRoLmNvcyhhbmdsZSk7XG4gIGNvbnN0IHMgPSBNYXRoLnNpbihhbmdsZSk7XG4gIHJldHVybiBbXG4gICAgYyAqIHRbMF0gLSBzICogdFszXSwgYyAqIHRbMV0gLSBzICogdFs0XSwgYyAqIHRbMl0gLSBzICogdFs1XSxcbiAgICBzICogdFswXSArIGMgKiB0WzNdLCBzICogdFsxXSArIGMgKiB0WzRdLCBzICogdFsyXSArIGMgKiB0WzVdLFxuICBdO1xufVxuXG5mdW5jdGlvbiB0cmFuc2Zvcm1TdHJldGNoKHQ6IEFmZmluZTJELCBzeDogbnVtYmVyLCBzeTogbnVtYmVyKTogQWZmaW5lMkQge1xuICByZXR1cm4gW1xuICAgIHN4ICogdFswXSwgc3ggKiB0WzFdLCBzeCAqIHRbMl0sXG4gICAgc3kgKiB0WzNdLCBzeSAqIHRbNF0sIHN5ICogdFs1XSxcbiAgXTtcbn1cblxuZnVuY3Rpb24gdHJhbnNmb3JtSW52ZXJ0KHQ6IEFmZmluZTJEKTogQWZmaW5lMkQge1xuICBjb25zdCBkZXQgPSB0WzBdICogdFs0XSAtIHRbM10gKiB0WzFdO1xuICBjb25zdCBkeCA9IHRbMV0gKiB0WzVdIC0gdFs0XSAqIHRbMl07XG4gIGNvbnN0IGR5ID0gdFszXSAqIHRbMl0gLSB0WzBdICogdFs1XTtcbiAgcmV0dXJuIFtcbiAgICAgdFs0XSAvIGRldCwgLXRbMV0gLyBkZXQsIGR4IC8gZGV0LFxuICAgIC10WzNdIC8gZGV0LCAgdFswXSAvIGRldCwgZHkgLyBkZXQsXG4gIF07XG59XG5cbmZ1bmN0aW9uIHRyYW5zZm9ybVBvaW50KHQ6IEFmZmluZTJELCBwOiBQb2ludDJEKTogUG9pbnQyRCB7XG4gIHJldHVybiBbXG4gICAgcFswXSAqIHRbMF0gKyBwWzFdICogdFsxXSArIHRbMl0sXG4gICAgcFswXSAqIHRbM10gKyBwWzFdICogdFs0XSArIHRbNV0sXG4gIF07XG59XG5cbmZ1bmN0aW9uIHRyYW5zZm9ybU11dGF0ZVBvaW50KHQ6IEFmZmluZTJELCBwOiBQb2ludDJEKSB7XG4gIGNvbnN0IHggPSBwWzBdICogdFswXSArIHBbMV0gKiB0WzFdICsgdFsyXTtcbiAgY29uc3QgeSA9IHBbMF0gKiB0WzNdICsgcFsxXSAqIHRbNF0gKyB0WzVdO1xuICBwWzBdID0geDtcbiAgcFsxXSA9IHk7XG59XG5cbmZ1bmN0aW9uIHRyYW5zZm9ybU5vcm1hbCh0OiBBZmZpbmUyRCwgbjogUG9pbnQyRCk6IFBvaW50MkQge1xuICByZXR1cm4gW1xuICAgIG5bMF0gKiB0WzBdICsgblsxXSAqIHRbMV0sXG4gICAgblswXSAqIHRbM10gKyBuWzFdICogdFs0XSxcbiAgXTtcbn1cblxuZnVuY3Rpb24gdHJhbnNmb3JtTXV0YXRlTm9ybWFsKHQ6IEFmZmluZTJELCBuOiBQb2ludDJEKSB7XG4gIGNvbnN0IHggPSBuWzBdICogdFswXSArIG5bMV0gKiB0WzFdO1xuICBjb25zdCB5ID0gblswXSAqIHRbM10gKyBuWzFdICogdFs0XTtcbiAgblswXSA9IHg7XG4gIG5bMV0gPSB5O1xufVxuXG5leHBvcnQge1xuICB0cmFuc2Zvcm1Db21wb3NlLFxuICB0cmFuc2Zvcm1JZGVudGl0eUNyZWF0ZSxcbiAgdHJhbnNmb3JtSW52ZXJ0LFxuICB0cmFuc2Zvcm1NdXRhdGVOb3JtYWwsXG4gIHRyYW5zZm9ybU11dGF0ZVBvaW50LFxuICB0cmFuc2Zvcm1Ob3JtYWwsXG4gIHRyYW5zZm9ybVBvaW50LFxuICB0cmFuc2Zvcm1TY2FsZSxcbiAgdHJhbnNmb3JtU2NhbGVDcmVhdGUsXG4gIHRyYW5zZm9ybVN0cmV0Y2gsXG4gIHRyYW5zZm9ybVN0cmV0Y2hDcmVhdGUsXG4gIHRyYW5zZm9ybVRyYW5zbGF0ZSxcbiAgdHJhbnNmb3JtVHJhbnNsYXRlQ3JlYXRlLFxuICB0cmFuc2Zvcm1Sb3RhdGUsXG4gIHRyYW5zZm9ybVJvdGF0ZUNyZWF0ZSxcbn07XG4iXX0=